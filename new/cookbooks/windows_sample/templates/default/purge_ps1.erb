$basedir = '<%= @basedir -%>'
$powershell_noop = <%= @powershell_noop -%>

if ($basedir -eq '' ) {
  $basedir = "${env:USErPROFILE}"
}
get-childitem -path "${basedir}\.m2\repository" | where-object {
  $_.PSIsContainer } | foreach-object {
  $maven_directory = $_
  [String]$full_maven_directory_name = $maven_directory.FullName
  write-host ('Removing "{0}"' -f $full_maven_directory_name)
  if ($powershell_noop) {
    remove-item -path $full_maven_directory_name -recurse -force -whatif
  } else {
    remove-item -path $full_maven_directory_name -recurse -force
  }
}
